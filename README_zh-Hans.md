# 批量模板化 OCR 工具 (Batch Template OCR Tool)

**版本**: v2.6

**核心引擎**: Tesseract.js v5

这是一个基于浏览器的纯前端批量 OCR 工具。它允许用户定义“识别模板”（即在图片上框选特定区域），然后自动批量处理大量结构相同的图片（如发票、表单、证件），并将指定区域的文字提取为 CSV 表格。

## ✨ 核心功能

* **🛡️ 隐私安全**：基于 `Tesseract.js`，所有识别过程完全在**本地浏览器**中运行，图片**不会上传**到任何服务器。

* **📂 智能文件管理**：

  * 支持**拖拽上传**文件夹或多个文件。

  * 自动根据图片分辨率（如 `1920x1080`, `800x600`）进行**分组**，解决不同来源图片尺寸不一致的问题。

* **🎨 交互式模板设计**：

  * 在 Canvas 画布上自由绘制识别区域。

  * 支持**拖拽移动**识别框位置。

  * 支持**调整大小**（所有框均配有调整手柄）。

  * 支持鼠标滚轮缩放画布，支持全屏编辑模式。

* **⚙️ 强大的配置管理**：

  * 支持**导入/导出配置 (JSON)**：一次画好模板，保存后下次直接复用，或分享给同事。

  * **字段排序**：可自由调整字段顺序，决定导出表格的列顺序。

* **📊 批量处理与导出**：

  * 支持多语言识别（中、英、日等）。

  * 实时进度条显示。

  * 结果一键导出为 **CSV** 文件（可直接用 Excel 打开）。

## 🚀 快速开始

### 1. 运行方式

本工具为单文件 HTML 应用。

* **推荐**：使用 VS Code 的 "Live Server" 插件运行。

* **直接打开**：双击 `.html` 文件在 Chrome 或 Edge 浏览器中打开（需确保网络连接以加载 Tesseract 核心库）。

### 2. 操作流程

#### 第一步：导入图片

* 将包含图片的**文件夹**直接拖入灰色区域。

* 或者点击“选择文件夹”/“选择文件”按钮。

* *提示：工具会自动分析图片尺寸并分组。*

#### 第二步：定义字段

* 在输入框输入字段名（例如：`发票代码`、`日期`、`金额`），按 **Enter** 键添加。

* 在下方列表中，可以通过 `↑` `↓` 按钮调整字段顺序（这将影响 CSV 的列排序）。

* *高级功能：如果有之前保存的 `.json` 配置文件，点击“导入配置”即可跳过此步和第三步。*

#### 第三步：设定识别区域（画框）

1. 在“当前尺寸组”下拉菜单中选择一个分辨率分组。

2. 在左侧列表点击你要画的字段（例如 `发票代码`）。

3. 在右侧图片上按住鼠标左键**画框**。

4. **调整**：

   * **移动**：按住框顶部的字段名标签拖动。

   * **缩放**：拖动框右下角的白色小方块手柄。

5. *注意：如果你的图片有多种不同的分辨率，记得切换“尺寸组”分别为它们画框。*

#### 第四步：批量识别

1. 选择识别语言（默认为英文，识别中文请切换为 `简体中文`）。

2. 点击 **“🚀 开始批量识别”**。

3. 等待进度条走完，点击 **“💾 下载 CSV”** 保存结果。

## ⚠️ 常见问题与注意事项

1. **为什么识别率不高？**

   * Tesseract.js 是轻量级引擎，对**手写体**或**背景复杂**的图片效果有限。

   * 建议确保识别区域尽量只包含文字，不包含多余的边框或噪点。

   * 确保选择了正确的语言包（例如图片里有中文，必须选 `Chinese`）。

2. **移动端兼容性？**

   * 当前版本主要针对 **桌面端 (PC/Mac)** 优化（鼠标操作）。移动端无法进行画框操作。

3. **数据去哪了？**

   * 所有数据均在您的浏览器内存中处理，刷新页面后数据将丢失。请务必及时下载 CSV 或导出配置文件。

## 📜 许可证

本项目开源，基于 MIT 许可证。使用了 [Tesseract.js](https://github.com/naptha/tesseract.js) 库。
